\subsubsection{Register to PowerEnJoy}
%
\textbf{Actors:}
Guest\\
%
\textbf{Entry Conditions:}
A guest enters in the registration section.\\ 
%
\textbf{Flow of events:}
\begin{enumerate}
\item The guest fills the form with his personal data, the number of his ID card and the number of the driving license. 
\item The guest uploads driver license picture.
\item  The guest fills the payment information form with his credit or prepaid card's information. 
\item PowerEnJoy verifies if the data are valid and sends an email to the guest with his password and a pin necessary to start the rental. 
\item PowerEnJoy registers the guest as a new client. 
\end{enumerate}
%
\textbf{Exit Conditions:}
Guest successfully ends registration process and becomes a Client. From now on he can log in to the application using his credential and use the PowerEnJoy service. \\ 
%
\textbf{Exceptions:}
\begin{itemize}
\item If the guest inserts not valid data the system highlights the not valid fields and doesn't allow him to complete the registration.
\item If the guest inserts an already used Email PowerEnJoy doesn't allow him to complete the registration.
\item The system does not allow an existing client to register a second time.
\end{itemize}
%
\textbf{Special Requirements:}
\begin{itemize}
\item After the registration the client must be able to use the service after no more than 5 minutes.
\item After that the guest has filled the form, he must receive an email feedback with the password and pin within two hours.
\item The communication of sensible data is made throw a protected channel.
\end{itemize}


\subsubsection{Log-in}
%
\textbf{Actors:}
Client\\
%
\textbf{Entry Conditions:}
A client enters in the log-in section.\\
%
\textbf{Flow of events:}
\begin{enumerate}
\item The client enters his credentials.
\item PowerEnJoy verifies if credentials are valid.
\item PowerEnJoy redirects the client to the map section.
\end{enumerate}
%
\textbf{Exit Conditions:}
Client is logged in to the system.\\
%
\textbf{Exceptions:}
\begin{itemize}
\item The client inserts not valid credentials. PowerEnJoy notifies him an error and allows him to enter his email and password again.
\item If the client is a blocked client the system notifies him an error and doesn't allow him to log-in.
\end{itemize}
%
\textbf{Special Requirements:}
\begin{itemize}
\item The system should provide a feedback in 10 seconds.
\end{itemize}


\subsubsection{Display a map information}
%
\textbf{Actors:}
User\\
%
\textbf{Entry Conditions:}
Entering in the map section. \\
%
\textbf{Flow of events:}
\begin{enumerate}
\item User sends his GPS position or selects an address on the map, and specifies a maximum distance from this point.
\item PowerEnJoy displays the data about the part of map requested: 
\begin{itemize}
\item location of available cars
\item location of charging areas and number of available charging spots
\item boundaries of safe areas 
\end{itemize}
\item User requests information about one selected car.
\item PowerEnJoy sends back the remaining charge percentage and the license plate number of the selected car .
\item User can see the requested information in a car information menu.
\end{enumerate}
%
\textbf{Exit Conditions:}
Exit from the map section, or a start of a reservation. \\
%
\textbf{Exceptions:}
\begin{itemize}
\item If User doesn't obtain a valid GPS signal, PowerEnJoy uses a default position like the center of his preferred city.
\item If User requests information about a car that is not available anymore, PowerEnJoy doesn't send any information about this car, and all the positions of displayed cars are refreshed.
\item If User selects an address out of city, PowerEnJoy uses a default position.
\end{itemize}
%
\textbf{Special Requirements:}
\begin{itemize}
\item The map will refresh every 10 seconds.
\end{itemize}


\subsubsection{Reserve a car}
%
\textbf{Actors:}
Logged Client\\
%
\textbf{Entry Conditions:}
A client clicks the Reserve button in the car information menu.\\
%
\textbf{Flow of events:}
\begin{enumerate}
\item PowerEnJoy sets the car as reserved.
\item The client receives the confirmation of the reservation.
\item The client checks the remaining time of the reservation.  
\end{enumerate}
%
\textbf{Exit Conditions:}
The car is no longer available, the client has now a rent in progress.\\
%
\textbf{Exceptions:}
\begin{itemize}
\item The client has already canceled a reservation on the same car in the last 15 minutes. 
\item The car is no longer available.
\end{itemize}
In all of these cases the reservation process is not performed and the user is redirected to the map section. \\
%
\textbf{Special Requirements:}
\begin{itemize}
\item The system should provide a feedback in 10 seconds.
\end{itemize}


\subsubsection{Open a car}
%
\textbf{Actors:}
Logged Client \\
%
\textbf{Entry Conditions:}
Client has done a reservation. \\
%
\textbf{Flow of events:}
\begin{enumerate}
\item Client moves to a car location, within an hour from the reservation.
\item Once he has arrived, he can push the open button from the application.
\item PowerEnJoy verifies the client position and releases the car doors lock.
\item Client opens the car within a minute.
\end{enumerate}
%
\textbf{Exit Conditions:}
Client starts the rent. \\
%
\textbf{Exceptions:}
\begin{itemize}
\item If the client doesn't reach the car within one hour, PowerEnJoy deletes the reservation and applies a fee of 1 Euro.
\item If the client tries to open the car while he is farther more than 15 meters from the car or he has not GPS signal, PowerEnJoy doesn't unlock the car door.
\end{itemize}
%
\textbf{Special Requirements:}
\begin{itemize}
\item PowerEnJoy unlocks the car within a minute from the request.
\end{itemize}



\subsubsection{Start the rent}
%
\textbf{Actors:}
Logged Client \\
%
\textbf{Entry Conditions:}
The system has opened the car.\\
%
\textbf{Flow of events:}
\begin{enumerate}
\item The Client inserts the pin.
\item The system after checking the correctness of the pin enables the possibility to turn on the engine.
\item The Client turns on the engine.
\item The Client selects his destination.
\item The car screen displays the current cost and route information.
\item The Client starts moving to his destination.
\item The Client sees in real time how much he is spending.
\end{enumerate}
\textbf{Exit Conditions:}
The Client is driving the rented car.\\
%
\textbf{Exceptions:}
\begin{itemize}
\item If the charge of the car is lower than 15\% the car system signals to park the car immediately.
\item If the client continues driving until the car battery is empty the system applies a fee of 100 euros to the client.
\item If the rent takes more than 1 day the system signals the case to the operators system.
\end{itemize}
%
\textbf{Special Requirements:}
There are no special Requirements.


\subsubsection{End the rent}
%
\textbf{Actors:}
Logged Client \\
%
\textbf{Entry Conditions:}
Client reaches the destination. \\
%
\textbf{Flow of events:}
\begin{enumerate}
\item Client parks the car in a safe area and turns off the engine.
\item Client pushes the button to end the rent and exits the car.
\item PowerEnJoy receives the request, checks if the car is parked in a safe area and, after one minute, locks the doors of the car and terminates the rent.
\item PowerEnJoy charges the client after 5 minutes to give him the possibility to plug the car.
\end{enumerate}
%
\textbf{Exit Conditions:}
The car is set as available. \\
%
\textbf{Exceptions:}
\begin{itemize}
\item If the client tries to leave the car out of a safe area, the system doesn't allow him to end the rent.
\item If the client doesn't have enough money to pay the rent, PowerEnJoy disables the client account until the debt is absolved.
\item If the client doesn't exit from the car after one minute, the system doesn't lock the car doors and doesn't terminate the rent.
\end{itemize}
%
\textbf{Special Requirements:}
There are no special Requirements.



\subsubsection{Plug the car}
%
\textbf{Actors:}
Logged Client \\
%
\textbf{Entry Conditions:}
The Client parks the car in a charging station with free plugs and ends the rent. \\
%
\textbf{Flow of events:}
\begin{enumerate}
\item The Client opens the charging slot of the car.
\item The Client plugs the plug to the car.
\item The car system applies a discount of 30\% to the last rent.
\end{enumerate}
%
\textbf{Exit Conditions:}
The car is correctly plugged-in and is recharging.\\
%
\textbf{Exceptions:}
If the client plugs the car after 5 minutes, the system doesn't apply the discount.\\
%
\textbf{Special Requirements:}
There are no Special Requirements.



\subsubsection{Report damaged/dirty car}
%
\textbf{Actors:}
Logged Client \\
%
\textbf{Entry Conditions:}
Client is in front of a damaged or dirty car he has reserved.\\
%
\textbf{Flow of events:}
\begin{enumerate}
\item A Client decides to report the conditions of the car by clicking the "Report damaged/dirty car" button on the app.
\item PowerEnJoy redirects the client to a form where he has to indicate:
\begin{itemize}
\item Type of Abuse : "Damaged" or "Dirty" 
\item Gravity of the problem : from 0 to 5
\end{itemize}
\item PowerEnJoy signals the case to the operators system.
\item PowerEnJoy proposes to the client two alternatives :
\begin{itemize}
\item "Continue rent"
\item "End rent"
\end{itemize}
\item The client selects the desired choice.
\end{enumerate}
%
\textbf{Exit Conditions:}
The car is set unavailable.  \\
\textbf{Exceptions:}
 There are not exceptions. \\
\textbf{Special Requirements:}
 There are not Special Requirements\\

\subsubsection{Select money saving option}
%
\textbf{Actors:}
Logged Client \\
%
\textbf{Entry Conditions:}
The Client selects the money saving option on the car display.\\
%
\textbf{Flow of events:}
\begin{enumerate}
\item The system estimates which is the most suitable charging station based on the city car distribution and the location chosen by the client. 
\item The car system suggests a possible charging station.
\item The client selects the suggested charging station.
\end{enumerate}
%
\textbf{Exit Conditions:}
The car system starts the navigation to the chosen charging station. \\
%
\textbf{Exceptions:}
\begin{itemize}
\item If the client doesn't like the suggested charging station he can undo the action and proceed with the normal mode.
\end{itemize}
%
\textbf{Special Requirements:}
\begin{itemize}
\item The system should provide feedback within 10 seconds.
\end{itemize}
